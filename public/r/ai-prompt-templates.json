{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "ai-prompt-templates",
  "type": "registry:component",
  "title": "AI Prompt Templates",
  "description": "Browse and use pre-built prompt templates with variables.",
  "registryDependencies": [
    "badge",
    "button",
    "card",
    "dialog",
    "field",
    "input-group",
    "separator"
  ],
  "files": [
    {
      "path": "registry/new-york/blocks/ai/ai-prompt-templates.tsx",
      "content": "\"use client\";\n\nimport {\n  BookOpen,\n  Eye,\n  Heart,\n  Loader2,\n  Plus,\n  Search,\n  Sparkles,\n  X,\n} from \"lucide-react\";\nimport { useMemo, useState } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Field, FieldContent, FieldLabel } from \"@/components/ui/field\";\nimport {\n  InputGroup,\n  InputGroupAddon,\n  InputGroupInput,\n} from \"@/components/ui/input-group\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { cn } from \"@/lib/utils\";\n\nexport interface PromptTemplate {\n  id: string;\n  name: string;\n  description: string;\n  category: string;\n  prompt: string;\n  variables?: Array<{\n    name: string;\n    label: string;\n    placeholder?: string;\n    required?: boolean;\n  }>;\n  isFavorite?: boolean;\n  isPopular?: boolean;\n  usageCount?: number;\n  author?: string;\n  tags?: string[];\n  icon?: React.ComponentType<{ className?: string }>;\n}\n\nexport interface AIPromptTemplatesProps {\n  templates?: PromptTemplate[];\n  categories?: string[];\n  onSelect?: (\n    template: PromptTemplate,\n    filledVariables?: Record<string, string>\n  ) => void;\n  onFavorite?: (templateId: string, isFavorite: boolean) => Promise<void>;\n  onCreate?: () => void;\n  className?: string;\n  showSearch?: boolean;\n  showCategories?: boolean;\n  showFavorites?: boolean;\n}\n\nconst defaultCategories = [\n  \"All\",\n  \"Writing\",\n  \"Code\",\n  \"Analysis\",\n  \"Creative\",\n  \"Research\",\n  \"Business\",\n];\n\nconst categoryIcons: Record<\n  string,\n  React.ComponentType<{ className?: string }>\n> = {\n  Writing: BookOpen,\n  Code: Sparkles,\n  Analysis: Sparkles,\n  Creative: Sparkles,\n  Research: BookOpen,\n  Business: Sparkles,\n};\n\nfunction fillTemplatePrompt(\n  prompt: string,\n  variables: Record<string, string>\n): string {\n  let filled = prompt;\n  Object.entries(variables).forEach(([key, value]) => {\n    filled = filled.replace(new RegExp(`\\\\{${key}\\\\}`, \"g\"), value);\n  });\n  return filled;\n}\n\nexport default function AIPromptTemplates({\n  templates = [],\n  categories = defaultCategories,\n  onSelect,\n  onFavorite,\n  onCreate,\n  className,\n  showSearch = true,\n  showCategories = true,\n  showFavorites = true,\n}: AIPromptTemplatesProps) {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedCategory, setSelectedCategory] = useState<string>(\"All\");\n  const [showFavoritesOnly, setShowFavoritesOnly] = useState(false);\n  const [selectedTemplate, setSelectedTemplate] =\n    useState<PromptTemplate | null>(null);\n  const [templateVariables, setTemplateVariables] = useState<\n    Record<string, string>\n  >({});\n  const [isFavoriting, setIsFavoriting] = useState<string | null>(null);\n  const [showPreview, setShowPreview] = useState(false);\n\n  const filteredTemplates = useMemo(() => {\n    let filtered = templates;\n\n    if (showFavoritesOnly) {\n      filtered = filtered.filter((t) => t.isFavorite);\n    }\n\n    if (selectedCategory !== \"All\") {\n      filtered = filtered.filter((t) => t.category === selectedCategory);\n    }\n\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      filtered = filtered.filter(\n        (t) =>\n          t.name.toLowerCase().includes(query) ||\n          t.description.toLowerCase().includes(query) ||\n          t.prompt.toLowerCase().includes(query) ||\n          t.tags?.some((tag) => tag.toLowerCase().includes(query))\n      );\n    }\n\n    return filtered.sort((a, b) => {\n      if (a.isPopular && !b.isPopular) return -1;\n      if (!a.isPopular && b.isPopular) return 1;\n      if (a.isFavorite && !b.isFavorite) return -1;\n      if (!a.isFavorite && b.isFavorite) return 1;\n      return (b.usageCount || 0) - (a.usageCount || 0);\n    });\n  }, [templates, selectedCategory, searchQuery, showFavoritesOnly]);\n\n  const handleSelect = (template: PromptTemplate) => {\n    if (template.variables && template.variables.length > 0) {\n      setSelectedTemplate(template);\n      setTemplateVariables({});\n    } else {\n      onSelect?.(template);\n    }\n  };\n\n  const handleUseTemplate = () => {\n    if (!selectedTemplate) return;\n\n    const variables = templateVariables;\n    onSelect?.(selectedTemplate, variables);\n    setSelectedTemplate(null);\n    setTemplateVariables({});\n    setShowPreview(false);\n  };\n\n  const handleFavorite = async (\n    templateId: string,\n    currentFavorite: boolean | undefined,\n    e: React.MouseEvent\n  ) => {\n    e.stopPropagation();\n    if (!onFavorite) return;\n\n    setIsFavoriting(templateId);\n    try {\n      await onFavorite(templateId, !(currentFavorite ?? false));\n    } finally {\n      setIsFavoriting(null);\n    }\n  };\n\n  const previewPrompt = selectedTemplate\n    ? fillTemplatePrompt(selectedTemplate.prompt, templateVariables)\n    : \"\";\n\n  const canUseTemplate =\n    !selectedTemplate?.variables ||\n    selectedTemplate.variables.every(\n      (v) => !v.required || templateVariables[v.name]\n    );\n\n  if (templates.length === 0) {\n    return (\n      <Card className={cn(\"w-full shadow-xs\", className)}>\n        <CardHeader>\n          <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\n            <div className=\"flex flex-col gap-1\">\n              <CardTitle>Prompt Templates</CardTitle>\n              <CardDescription>\n                Browse and use pre-built prompt templates\n              </CardDescription>\n            </div>\n            {onCreate && (\n              <Button\n                className=\"w-full sm:w-auto\"\n                onClick={onCreate}\n                type=\"button\"\n              >\n                <Plus className=\"size-4\" />\n                Create Template\n              </Button>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-col items-center justify-center gap-4 py-12 text-center\">\n            <div className=\"flex size-12 items-center justify-center rounded-full bg-muted\">\n              <BookOpen className=\"size-6 text-muted-foreground\" />\n            </div>\n            <p className=\"text-muted-foreground text-sm\">\n              No templates available\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <>\n      <Card className={cn(\"w-full shadow-xs\", className)}>\n        <CardHeader>\n          <div className=\"flex flex-col gap-4\">\n            <div className=\"flex flex-col gap-4\">\n              <div className=\"flex flex-col gap-1\">\n                <CardTitle>Prompt Templates</CardTitle>\n                <CardDescription>\n                  Browse and use pre-built prompt templates\n                </CardDescription>\n              </div>\n              {onCreate && (\n                <Button className=\"w-full\" onClick={onCreate} type=\"button\">\n                  <Plus className=\"size-4\" />\n                  Create Template\n                </Button>\n              )}\n            </div>\n            {showSearch && (\n              <InputGroup>\n                <InputGroupAddon>\n                  <Search className=\"size-4\" />\n                </InputGroupAddon>\n                <InputGroupInput\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  placeholder=\"Search templatesâ€¦\"\n                  type=\"search\"\n                  value={searchQuery}\n                />\n                {searchQuery && (\n                  <Button\n                    aria-label=\"Clear search\"\n                    className=\"-translate-y-1/2 absolute top-1/2 right-2\"\n                    onClick={() => setSearchQuery(\"\")}\n                    size=\"icon\"\n                    type=\"button\"\n                    variant=\"ghost\"\n                  >\n                    <X className=\"size-4\" />\n                  </Button>\n                )}\n              </InputGroup>\n            )}\n            {showCategories && (\n              <div className=\"flex flex-wrap items-center gap-2\">\n                {showFavorites && (\n                  <Button\n                    className={cn(\n                      \"h-auto gap-2 px-3 py-1.5\",\n                      showFavoritesOnly\n                        ? \"bg-primary text-primary-foreground\"\n                        : \"bg-muted text-muted-foreground hover:bg-muted/80\"\n                    )}\n                    onClick={() => setShowFavoritesOnly(!showFavoritesOnly)}\n                    type=\"button\"\n                    variant=\"ghost\"\n                  >\n                    <Heart className=\"size-3.5\" />\n                    <span className=\"text-xs\">Favorites</span>\n                  </Button>\n                )}\n                {categories.map((category) => {\n                  const Icon = categoryIcons[category] || Sparkles;\n                  return (\n                    <Button\n                      className={cn(\n                        \"h-auto gap-2 px-3 py-1.5\",\n                        selectedCategory === category\n                          ? \"bg-primary text-primary-foreground\"\n                          : \"bg-muted text-muted-foreground hover:bg-muted/80\"\n                      )}\n                      key={category}\n                      onClick={() => setSelectedCategory(category)}\n                      type=\"button\"\n                      variant=\"ghost\"\n                    >\n                      {category !== \"All\" && <Icon className=\"size-3.5\" />}\n                      <span className=\"text-xs\">{category}</span>\n                    </Button>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent>\n          {filteredTemplates.length === 0 ? (\n            <div className=\"flex flex-col items-center justify-center gap-4 py-12 text-center\">\n              <p className=\"text-muted-foreground text-sm\">\n                No templates match your filters\n              </p>\n            </div>\n          ) : (\n            <div className=\"grid gap-4\">\n              {filteredTemplates.map((template) => {\n                const Icon =\n                  template.icon || categoryIcons[template.category] || Sparkles;\n                const hasVariables =\n                  template.variables && template.variables.length > 0;\n                return (\n                  <div\n                    className=\"group flex flex-col gap-4 rounded-lg border bg-card p-5 transition-all hover:border-primary hover:shadow-sm\"\n                    key={template.id}\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"flex size-10 shrink-0 items-center justify-center rounded-lg bg-primary/10 text-primary transition-colors group-hover:bg-primary/20\">\n                        <Icon className=\"size-5\" />\n                      </div>\n                      <div className=\"flex min-w-0 flex-1 flex-col justify-center\">\n                        <div className=\"flex flex-wrap items-center justify-between gap-2\">\n                          <h3 className=\"wrap-break-word font-semibold text-base leading-tight\">\n                            {template.name}\n                          </h3>\n                          <div className=\"flex shrink-0 items-center gap-1.5\">\n                            {template.isPopular && (\n                              <Badge className=\"text-xs\" variant=\"default\">\n                                Popular\n                              </Badge>\n                            )}\n                            {onFavorite && (\n                              <button\n                                aria-label={`${template.isFavorite ? \"Remove from\" : \"Add to\"} favorites`}\n                                className=\"rounded-md p-1.5 transition-colors hover:bg-muted\"\n                                disabled={isFavoriting === template.id}\n                                onClick={(e) =>\n                                  handleFavorite(\n                                    template.id,\n                                    template.isFavorite,\n                                    e\n                                  )\n                                }\n                                type=\"button\"\n                              >\n                                {isFavoriting === template.id ? (\n                                  <Loader2 className=\"size-4 animate-spin text-muted-foreground\" />\n                                ) : (\n                                  <Heart\n                                    className={cn(\n                                      \"size-4 transition-colors\",\n                                      template.isFavorite\n                                        ? \"fill-red-500 text-red-500\"\n                                        : \"text-muted-foreground group-hover:text-foreground\"\n                                    )}\n                                  />\n                                )}\n                              </button>\n                            )}\n                          </div>\n                        </div>\n                        <p className=\"wrap-break-word line-clamp-2 text-muted-foreground text-sm\">\n                          {template.description}\n                        </p>\n                      </div>\n                    </div>\n\n                    <div className=\"flex flex-wrap items-center gap-2\">\n                      {template.tags && template.tags.length > 0 && (\n                        <>\n                          {template.tags.slice(0, 2).map((tag) => (\n                            <Badge\n                              className=\"text-xs\"\n                              key={tag}\n                              variant=\"outline\"\n                            >\n                              {tag}\n                            </Badge>\n                          ))}\n                          {template.tags.length > 2 && (\n                            <span className=\"text-muted-foreground text-xs\">\n                              +{template.tags.length - 2}\n                            </span>\n                          )}\n                        </>\n                      )}\n                      {template.usageCount !== undefined && (\n                        <span className=\"text-muted-foreground text-xs\">\n                          {template.usageCount} uses\n                        </span>\n                      )}\n                      {hasVariables && (\n                        <Badge className=\"text-xs\" variant=\"secondary\">\n                          {template.variables!.length} variable\n                          {template.variables!.length !== 1 ? \"s\" : \"\"}\n                        </Badge>\n                      )}\n                    </div>\n\n                    <div className=\"flex items-center gap-2 pt-2\">\n                      <Button\n                        aria-label={`Use template: ${template.name}`}\n                        className=\"flex-1\"\n                        onClick={() => handleSelect(template)}\n                        type=\"button\"\n                      >\n                        {hasVariables ? \"Configure & Use\" : \"Use Template\"}\n                      </Button>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      <Dialog\n        onOpenChange={(open) => {\n          if (!open) {\n            setSelectedTemplate(null);\n            setTemplateVariables({});\n            setShowPreview(false);\n          }\n        }}\n        open={!!selectedTemplate}\n      >\n        <DialogContent className=\"flex max-h-[90vh] flex-col gap-0 sm:max-w-2xl\">\n          <DialogHeader className=\"shrink-0\">\n            <div className=\"flex items-start gap-3\">\n              {selectedTemplate &&\n                (() => {\n                  const Icon =\n                    selectedTemplate.icon ||\n                    categoryIcons[selectedTemplate.category] ||\n                    Sparkles;\n                  return (\n                    <>\n                      <div className=\"flex size-10 shrink-0 items-center justify-center rounded-lg bg-primary/10 text-primary\">\n                        <Icon className=\"size-5\" />\n                      </div>\n                      <div className=\"flex min-w-0 flex-1 flex-col gap-1\">\n                        <DialogTitle className=\"wrap-break-word\">\n                          {selectedTemplate.name}\n                        </DialogTitle>\n                        <DialogDescription className=\"wrap-break-word\">\n                          {selectedTemplate.description}\n                        </DialogDescription>\n                      </div>\n                    </>\n                  );\n                })()}\n            </div>\n          </DialogHeader>\n\n          {selectedTemplate && (\n            <div className=\"flex flex-1 flex-col gap-6 overflow-y-auto p-6\">\n              {selectedTemplate.variables &&\n              selectedTemplate.variables.length > 0 ? (\n                <div className=\"flex flex-col gap-4\">\n                  <h3 className=\"font-medium text-sm\">Fill in the details</h3>\n                  <div className=\"flex flex-col gap-4\">\n                    {selectedTemplate.variables.map((variable) => (\n                      <Field key={variable.name}>\n                        <FieldLabel\n                          htmlFor={`${selectedTemplate.id}-${variable.name}`}\n                        >\n                          {variable.label}\n                          {variable.required && (\n                            <span className=\"text-destructive\"> *</span>\n                          )}\n                        </FieldLabel>\n                        <FieldContent>\n                          <InputGroup>\n                            <InputGroupInput\n                              id={`${selectedTemplate.id}-${variable.name}`}\n                              onChange={(e) => {\n                                setTemplateVariables((prev) => ({\n                                  ...prev,\n                                  [variable.name]: e.target.value,\n                                }));\n                              }}\n                              placeholder={\n                                variable.placeholder ||\n                                `Enter ${variable.label.toLowerCase()}`\n                              }\n                              type=\"text\"\n                              value={templateVariables[variable.name] || \"\"}\n                            />\n                          </InputGroup>\n                        </FieldContent>\n                      </Field>\n                    ))}\n                  </div>\n                </div>\n              ) : null}\n\n              <Separator />\n\n              <div className=\"flex flex-col gap-3\">\n                <div className=\"flex items-center justify-between\">\n                  <h3 className=\"font-medium text-sm\">Preview</h3>\n                  <Button\n                    className=\"h-auto gap-2 px-2 py-1\"\n                    onClick={() => setShowPreview(!showPreview)}\n                    type=\"button\"\n                    variant=\"ghost\"\n                  >\n                    <Eye className=\"size-4\" />\n                    <span className=\"text-xs\">\n                      {showPreview ? \"Hide\" : \"Show\"} Preview\n                    </span>\n                  </Button>\n                </div>\n                {showPreview && (\n                  <div className=\"rounded-lg border bg-muted/30 p-4\">\n                    <p className=\"wrap-break-word whitespace-pre-wrap text-sm\">\n                      {previewPrompt || selectedTemplate.prompt}\n                    </p>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          <DialogFooter className=\"shrink-0 border-t p-6\">\n            <Button\n              onClick={() => {\n                setSelectedTemplate(null);\n                setTemplateVariables({});\n                setShowPreview(false);\n              }}\n              type=\"button\"\n              variant=\"outline\"\n            >\n              Cancel\n            </Button>\n            <Button\n              disabled={!canUseTemplate}\n              onClick={handleUseTemplate}\n              type=\"button\"\n            >\n              Use Template\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n",
      "type": "registry:component"
    }
  ]
}

{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "auth-account-delete",
  "type": "registry:component",
  "title": "Auth Account Delete",
  "description": "Delete account with password confirmation and data loss acknowledgment.",
  "registryDependencies": [
    "alert-dialog",
    "button",
    "card",
    "checkbox",
    "field",
    "input-group"
  ],
  "files": [
    {
      "path": "registry/new-york/blocks/auth/auth-account-delete.tsx",
      "content": "\"use client\";\n\nimport {\n  AlertTriangle,\n  Eye,\n  EyeOff,\n  Loader2,\n  Shield,\n  Trash2,\n} from \"lucide-react\";\nimport { useCallback, useState } from \"react\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from \"@/components/ui/alert-dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport {\n  Field,\n  FieldContent,\n  FieldError,\n  FieldLabel,\n} from \"@/components/ui/field\";\nimport {\n  InputGroup,\n  InputGroupAddon,\n  InputGroupButton,\n  InputGroupInput,\n} from \"@/components/ui/input-group\";\nimport { cn } from \"@/lib/utils\";\n\nexport interface AuthAccountDeleteProps {\n  onDelete?: (data: { password: string; confirmText: string }) => void;\n  className?: string;\n  isLoading?: boolean;\n  errors?: {\n    password?: string;\n    confirmText?: string;\n    general?: string;\n  };\n  confirmText?: string; // Text user must type to confirm (e.g., \"DELETE\")\n  dataSummary?: {\n    projects?: number;\n    files?: number;\n    storage?: string;\n  };\n}\n\nexport default function AuthAccountDelete({\n  onDelete,\n  className,\n  isLoading = false,\n  errors,\n  confirmText = \"DELETE\",\n  dataSummary,\n}: AuthAccountDeleteProps) {\n  const [password, setPassword] = useState(\"\");\n  const [typedConfirm, setTypedConfirm] = useState(\"\");\n  const [acknowledgeDataLoss, setAcknowledgeDataLoss] = useState(false);\n  const [acknowledgeIrreversible, setAcknowledgeIrreversible] = useState(false);\n  const [showPassword, setShowPassword] = useState(false);\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n\n  const handleDelete = useCallback(() => {\n    if (\n      !password.trim() ||\n      typedConfirm !== confirmText ||\n      !acknowledgeDataLoss ||\n      !acknowledgeIrreversible\n    ) {\n      return;\n    }\n    onDelete?.({\n      password,\n      confirmText: typedConfirm,\n    });\n  }, [\n    password,\n    typedConfirm,\n    confirmText,\n    acknowledgeDataLoss,\n    acknowledgeIrreversible,\n    onDelete,\n  ]);\n\n  const isFormValid =\n    password.trim() &&\n    typedConfirm === confirmText &&\n    acknowledgeDataLoss &&\n    acknowledgeIrreversible;\n\n  const passwordError = errors?.password;\n  const confirmTextError = errors?.confirmText;\n  const generalError = errors?.general;\n\n  return (\n    <Card className={cn(\"w-full border-destructive/50 shadow-xs\", className)}>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2 text-destructive\">\n          <Trash2 className=\"size-5\" />\n          Delete account\n        </CardTitle>\n        <CardDescription>\n          Permanently delete your account and all associated data\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className=\"flex flex-col gap-6\">\n          {generalError && (\n            <div\n              aria-live=\"polite\"\n              className=\"rounded-lg border border-destructive/50 bg-destructive/10 p-3 text-destructive text-sm\"\n              role=\"alert\"\n            >\n              {generalError}\n            </div>\n          )}\n\n          <div className=\"rounded-lg border border-destructive/50 bg-destructive/5 p-4\">\n            <div className=\"flex items-start gap-3\">\n              <AlertTriangle className=\"size-5 shrink-0 text-destructive\" />\n              <div className=\"flex flex-1 flex-col gap-2\">\n                <p className=\"font-medium text-destructive text-sm\">\n                  This action cannot be undone\n                </p>\n                <p className=\"text-muted-foreground text-xs\">\n                  This will permanently delete your account and remove all of\n                  your data from our servers. This action is irreversible.\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {dataSummary && (\n            <div className=\"flex flex-col gap-2 rounded-lg border bg-muted/50 p-4\">\n              <h3 className=\"font-medium text-sm\">\n                Data that will be deleted:\n              </h3>\n              <ul className=\"flex flex-col gap-1 text-muted-foreground text-xs\">\n                {dataSummary.projects !== undefined && (\n                  <li>• {dataSummary.projects} project(s)</li>\n                )}\n                {dataSummary.files !== undefined && (\n                  <li>• {dataSummary.files} file(s)</li>\n                )}\n                {dataSummary.storage && (\n                  <li>• {dataSummary.storage} of storage</li>\n                )}\n                <li>• All account settings and preferences</li>\n                <li>• All personal information</li>\n              </ul>\n            </div>\n          )}\n\n          <AlertDialog onOpenChange={setIsDialogOpen} open={isDialogOpen}>\n            <AlertDialogTrigger asChild>\n              <Button className=\"w-full\" type=\"button\" variant=\"destructive\">\n                <Trash2 className=\"size-4\" />\n                Delete my account\n              </Button>\n            </AlertDialogTrigger>\n            <AlertDialogContent className=\"max-w-md\">\n              <AlertDialogHeader>\n                <AlertDialogTitle className=\"flex items-center gap-2\">\n                  <AlertTriangle className=\"size-5 text-destructive\" />\n                  Confirm account deletion\n                </AlertDialogTitle>\n                <AlertDialogDescription>\n                  This action is permanent and cannot be undone. Please confirm\n                  by entering your password and typing{\" \"}\n                  <span className=\"font-mono font-semibold\">{confirmText}</span>{\" \"}\n                  below.\n                </AlertDialogDescription>\n              </AlertDialogHeader>\n\n              <div className=\"flex flex-col gap-4 py-4\">\n                <Field data-invalid={!!passwordError}>\n                  <FieldLabel htmlFor=\"delete-account-password\">\n                    Password\n                    <span aria-label=\"required\" className=\"text-destructive\">\n                      *\n                    </span>\n                  </FieldLabel>\n                  <FieldContent>\n                    <InputGroup aria-invalid={!!passwordError}>\n                      <InputGroupAddon>\n                        <Shield className=\"size-4\" />\n                      </InputGroupAddon>\n                      <InputGroupInput\n                        aria-describedby={\n                          passwordError\n                            ? \"delete-account-password-error\"\n                            : undefined\n                        }\n                        aria-invalid={!!passwordError}\n                        autoComplete=\"current-password\"\n                        id=\"delete-account-password\"\n                        name=\"password\"\n                        onChange={(e) => setPassword(e.target.value)}\n                        placeholder=\"Enter your password\"\n                        required\n                        type={showPassword ? \"text\" : \"password\"}\n                        value={password}\n                      />\n                      <InputGroupButton\n                        aria-label={\n                          showPassword ? \"Hide password\" : \"Show password\"\n                        }\n                        onClick={(e) => {\n                          e.preventDefault();\n                          setShowPassword((prev) => !prev);\n                        }}\n                        type=\"button\"\n                      >\n                        {showPassword ? (\n                          <EyeOff className=\"size-4\" />\n                        ) : (\n                          <Eye className=\"size-4\" />\n                        )}\n                      </InputGroupButton>\n                    </InputGroup>\n                    {passwordError && (\n                      <FieldError id=\"delete-account-password-error\">\n                        {passwordError}\n                      </FieldError>\n                    )}\n                  </FieldContent>\n                </Field>\n\n                <Field data-invalid={!!confirmTextError}>\n                  <FieldLabel htmlFor=\"delete-account-confirm\">\n                    Type <span className=\"font-mono\">{confirmText}</span> to\n                    confirm\n                    <span aria-label=\"required\" className=\"text-destructive\">\n                      *\n                    </span>\n                  </FieldLabel>\n                  <FieldContent>\n                    <InputGroup aria-invalid={!!confirmTextError}>\n                      <InputGroupInput\n                        aria-describedby={\n                          confirmTextError\n                            ? \"delete-account-confirm-error\"\n                            : undefined\n                        }\n                        aria-invalid={!!confirmTextError}\n                        id=\"delete-account-confirm\"\n                        name=\"confirmText\"\n                        onChange={(e) => setTypedConfirm(e.target.value)}\n                        placeholder={confirmText}\n                        required\n                        type=\"text\"\n                        value={typedConfirm}\n                      />\n                    </InputGroup>\n                    {confirmTextError && (\n                      <FieldError id=\"delete-account-confirm-error\">\n                        {confirmTextError}\n                      </FieldError>\n                    )}\n                  </FieldContent>\n                </Field>\n\n                <div className=\"flex flex-col gap-3\">\n                  <div className=\"flex items-start gap-2\">\n                    <Checkbox\n                      checked={acknowledgeDataLoss}\n                      id=\"acknowledge-data-loss\"\n                      onCheckedChange={(checked) =>\n                        setAcknowledgeDataLoss(checked === true)\n                      }\n                    />\n                    <label\n                      className=\"cursor-pointer text-sm leading-relaxed peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n                      htmlFor=\"acknowledge-data-loss\"\n                    >\n                      I understand that all my data will be permanently deleted\n                      and cannot be recovered\n                    </label>\n                  </div>\n\n                  <div className=\"flex items-start gap-2\">\n                    <Checkbox\n                      checked={acknowledgeIrreversible}\n                      id=\"acknowledge-irreversible\"\n                      onCheckedChange={(checked) =>\n                        setAcknowledgeIrreversible(checked === true)\n                      }\n                    />\n                    <label\n                      className=\"cursor-pointer text-sm leading-relaxed peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n                      htmlFor=\"acknowledge-irreversible\"\n                    >\n                      I understand this action is irreversible\n                    </label>\n                  </div>\n                </div>\n              </div>\n\n              <AlertDialogFooter>\n                <AlertDialogCancel\n                  onClick={() => {\n                    setPassword(\"\");\n                    setTypedConfirm(\"\");\n                    setAcknowledgeDataLoss(false);\n                    setAcknowledgeIrreversible(false);\n                  }}\n                >\n                  Cancel\n                </AlertDialogCancel>\n                <AlertDialogAction\n                  aria-busy={isLoading}\n                  className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n                  data-loading={isLoading}\n                  disabled={!isFormValid || isLoading}\n                  onClick={handleDelete}\n                >\n                  {isLoading ? (\n                    <>\n                      <Loader2 className=\"size-4 animate-spin\" />\n                      Deleting…\n                    </>\n                  ) : (\n                    <>\n                      <Trash2 className=\"size-4\" />\n                      Delete account permanently\n                    </>\n                  )}\n                </AlertDialogAction>\n              </AlertDialogFooter>\n            </AlertDialogContent>\n          </AlertDialog>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n",
      "type": "registry:component"
    }
  ]
}
